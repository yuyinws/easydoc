import{o as i,f as d,h as r,t as y,r as p,b as g,w as P,j as S,k as b,e as m,T as w,l as H,m as f,n as B,u as k,p as u,F as $,q as j,s as E,v as F}from"./vendor.59374a99.js";import{_ as L}from"./index.585a8baf.js";const A={class:"min-w-full bg-gray-100 p-3 grid grid-cols-3"},N={class:"text-left col-span-2"},z={props:{title:{type:String,default:""}},emits:["changePop"],setup(t,{emit:o}){return(e,n)=>(i(),d("div",A,[r("i",{class:"iconfont icon-cebianlan",onClick:n[0]||(n[0]=s=>o("changePop"))}),r("div",N,y(t.title),1)]))}},I={props:{isPopShow:Boolean},setup(t){return(o,e)=>{const n=p("van-popup");return i(),g(n,{style:{"min-width":"50%",height:"100%"},show:t.isPopShow,"onUpdate:show":e[0]||(e[0]=s=>b(isPopShow)?isPopShow.value=s:null),position:"left"},{default:P(()=>[S(o.$slots,"default")]),_:3},8,["show"])}}};m.defaults.baseURL="/";m.interceptors.response.use(t=>{let o=t.data;const{state:e,subMsg:n,code:s}=o;return e&&e!==200||s&&s!=="0"?(w(`\u9519\u8BEF\uFF1A${n}`),t.data):o},t=>{if(t.response)switch(t.response.status){case 403:w({type:"error",message:"\u9519\u8BEF\uFF1A403"});break;case 404:w({type:"error",message:"\u9519\u8BEF\uFF1A404"})}});function C(t,o,e){let n={method:t,url:o};return(t==="POST"||t==="PATCH"||t==="PUT")&&e&&(n.data=e),(t==="GET"||t==="DELETE")&&e&&(n.params=e),m(n).then(s=>s,s=>s)}var v={userName:"",repo:"",clientId:"",secrets:"",apiDomain:""};function D(t="doc"){return C("get",`https://api.github.com/repos/${v.userName}/${v.repo}/contents/${t}?ref=gh-pages&client_id=${v.clientId}&client_secret=${v.secrets}`)}function U(t){return C("get",`/${v.repo}/${t}`)}const V={key:1,class:"px-3 pt-2"},G={class:"flex flex-row justify-between"},M={style:{"font-size":"20px"}},R=["onClick"],q={emits:["getText","changePop"],setup(t,{emit:o}){const e=H({fileList:[],pathArr:[],pathHistory:[]}),n=f(!1),s=a=>{a.type==="dir"?c(a.path):o("getText",a)},c=async a=>{n.value=!0,e.pathHistory.push(a),e.pathArr=a.split("/");const l=await D(a);e.fileList=l,n.value=!1},h=()=>{if(e.pathHistory.length<2){o("changePop");return}let a=e.pathHistory[e.pathHistory.length-2];e.pathHistory.pop(),e.pathHistory.pop(),c(a)};return B(()=>{c("doc")}),(a,l)=>{const x=p("van-loading"),T=p("van-divider");return n.value?(i(),g(x,{key:0,class:"loading",color:"#1989fa"})):(i(),d("div",V,[r("div",G,[r("div",null,[r("i",{class:"iconfont icon-houtui",style:{"font-size":"20px"},onClick:h}),r("span",M,y(k(e).pathArr[k(e).pathArr.length-1]),1)]),r("i",{class:"iconfont icon-guanbi",style:{"font-size":"20px"},onClick:l[0]||(l[0]=_=>o("changePop"))})]),u(T),(i(!0),d($,null,j(k(e).fileList,_=>(i(),d("div",{key:_.sha},[r("div",{onClick:Q=>s(_)},[r("i",{class:E(["iconfont",[_.type==="dir"?"icon-wenjianjia":"icon-24gl-fileText"]])},null,2),F(" "+y(_.name),1)],8,R)]))),128))]))}}};var O=L(q,[["__scopeId","data-v-6cde4d68"]]);const J={props:{text:{type:String,default:""},iscontainerLoading:Boolean},setup(t){return(o,e)=>{const n=p("van-loading"),s=p("v-md-preview");return t.iscontainerLoading?(i(),g(n,{key:0,class:"loading",color:"#1989fa"})):(i(),g(s,{key:1,text:t.text},null,8,["text"]))}}};var K=L(J,[["__scopeId","data-v-50168092"]]);const Y={setup(t){const o=f(!1),e=f("**Empty**"),n=f("Home"),s=f(!1),c=()=>{o.value=!o.value},h=async a=>{n.value=a.name,c(),s.value=!0;const l=await U(a.path);e.value=l,s.value=!1};return(a,l)=>{const x=p("router-view");return i(),d($,null,[u(z,{title:n.value,onChangePop:c},null,8,["title"]),u(I,{isPopShow:o.value},{default:P(()=>[u(O,{onChangePop:c,onGetText:h})]),_:1},8,["isPopShow"]),u(K,{text:e.value,iscontainerLoading:s.value},null,8,["text","iscontainerLoading"]),u(x)],64)}}};export{Y as default};
