import{o as r,f as v,h as i,t as m,r as u,b as g,w as P,i as T,j as S,e as k,T as x,k as H,l as d,m as B,u as w,n as p,F as $,p as E,q as F,v as A}from"./vendor.d8209fba.js";import{_ as b}from"./index.702dd250.js";const N={class:"min-w-full bg-gray-100 p-3 grid grid-cols-3"},j={class:"text-left col-span-2"},z={props:{title:{type:String,default:""}},emits:["changePop"],setup(t,{emit:o}){return(e,n)=>(r(),v("div",N,[i("i",{class:"iconfont icon-cebianlan",onClick:n[0]||(n[0]=s=>o("changePop"))}),i("div",j,m(t.title),1)]))}},I={props:{isPopShow:Boolean},setup(t){return(o,e)=>{const n=u("van-popup");return r(),g(n,{style:{"min-width":"50%",height:"100%"},show:t.isPopShow,"onUpdate:show":e[0]||(e[0]=s=>S(isPopShow)?isPopShow.value=s:null),position:"left"},{default:P(()=>[T(o.$slots,"default")]),_:3},8,["show"])}}};k.defaults.baseURL="/";k.interceptors.response.use(t=>{let o=t.data;const{state:e,subMsg:n,code:s}=o;return e&&e!==200||s&&s!=="0"?(x(`\u9519\u8BEF\uFF1A${n}`),t.data):o},t=>{if(t.response)switch(t.response.status){case 403:x({type:"error",message:"\u9519\u8BEF\uFF1A403"});break;case 404:x({type:"error",message:"\u9519\u8BEF\uFF1A404"})}});function L(t,o,e){let n={method:t,url:o};return(t==="POST"||t==="PATCH"||t==="PUT")&&e&&(n.data=e),(t==="GET"||t==="DELETE")&&e&&(n.params=e),k(n).then(s=>s,s=>s)}var f={apiDomain:"git.yuyinws.top",userName:"yuyinws",repo:"easydoc",clientId:"b46f59e6be5dff5ce391",secrets:"6c555701c1d52183e9a8b4351365bb50914bcf6b"};function D(t="doc"){return L("get",`https://api.github.com/repos/${f.userName}/${f.repo}/contents/${t}?ref=gh-pages&client_id=${f.clientId}&client_secret=${f.secrets}`)}function U(t){return L("get",`/${f.repo}/${t}`)}const V={key:1,class:"px-3 pt-2"},G={class:"flex flex-row justify-between"},M={style:{"font-size":"20px"}},R=["onClick"],q={emits:["getText","changePop"],setup(t,{emit:o}){const e=H({fileList:[],pathArr:[],pathHistory:[]}),n=d(!1),s=a=>{a.type==="dir"?c(a.path):o("getText",a)},c=async a=>{n.value=!0,e.pathHistory.push(a),e.pathArr=a.split("/");const l=await D(a);e.fileList=l,n.value=!1},h=()=>{if(e.pathHistory.length<2){o("changePop");return}let a=e.pathHistory[e.pathHistory.length-2];e.pathHistory.pop(),e.pathHistory.pop(),c(a)};return B(()=>{c("doc")}),(a,l)=>{const y=u("van-loading"),C=u("van-divider");return n.value?(r(),g(y,{key:0,class:"loading",color:"#1989fa"})):(r(),v("div",V,[i("div",G,[i("div",null,[i("i",{class:"iconfont icon-houtui",style:{"font-size":"20px"},onClick:h}),i("span",M,m(w(e).pathArr[w(e).pathArr.length-1]),1)]),i("i",{class:"iconfont icon-guanbi",style:{"font-size":"20px"},onClick:l[0]||(l[0]=_=>o("changePop"))})]),p(C),(r(!0),v($,null,E(w(e).fileList,_=>(r(),v("div",{key:_.sha},[i("div",{onClick:Q=>s(_)},[i("i",{class:F(["iconfont",[_.type==="dir"?"icon-wenjianjia":"icon-24gl-fileText"]])},null,2),A(" "+m(_.name),1)],8,R)]))),128))]))}}};var O=b(q,[["__scopeId","data-v-6cde4d68"]]);const J={props:{text:{type:String,default:""},iscontainerLoading:Boolean},setup(t){return(o,e)=>{const n=u("van-loading"),s=u("v-md-preview");return t.iscontainerLoading?(r(),g(n,{key:0,class:"loading",color:"#1989fa"})):(r(),g(s,{key:1,text:t.text},null,8,["text"]))}}};var K=b(J,[["__scopeId","data-v-50168092"]]);const Y={setup(t){const o=d(!1),e=d("**Empty**"),n=d("Home"),s=d(!1),c=()=>{o.value=!o.value},h=async a=>{n.value=a.name,c(),s.value=!0;const l=await U(a.path);e.value=l,s.value=!1};return(a,l)=>{const y=u("router-view");return r(),v($,null,[p(z,{title:n.value,onChangePop:c},null,8,["title"]),p(I,{isPopShow:o.value},{default:P(()=>[p(O,{onChangePop:c,onGetText:h})]),_:1},8,["isPopShow"]),p(K,{text:e.value,iscontainerLoading:s.value},null,8,["text","iscontainerLoading"]),p(y)],64)}}};export{Y as default};
